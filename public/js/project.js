!function(t){function r(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}var o={};r.m=t,r.c=o,r.i=function(t){return t},r.d=function(t,o,e){r.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:e})},r.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(o,"a",o),o},r.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},r.p="",r(r.s=169)}({134:function(t,r){var o=moment().format("YYYY-MM-DD");new Vue({el:"#project",data:{projects:[],search:"",prj_no:"",prj_name:"",quo_no:"",prj_from:o,prj_to:o,customer:"",description:"",sortKey:"",sortOrders:{prj_no:1,prj_name:1,customer:1,quo_no:1,prj_from:1,prj_to:1,status:1},currentPage:1,totalPages:1},mounted:function(){var t=this;$(".input-group.date").datepicker({maxViewMode:2,format:"yyyy-mm-dd",orientation:"bottom auto",autoclose:!0}).on("changeDate",function(){t.prj_from=$("#prj_from").val(),t.prj_to=$("#prj_to").val(),moment(t.prj_to)<moment(t.prj_from)&&(t.prj_to=t.prj_from,$("#prj_to").val(t.prj_from)),$("#to").datepicker("setStartDate",t.prj_from)}),this.fetch(),this.sortBy("prj_from")},computed:{filteredProject:function(){var t=[],r=new RegExp(this.search,"i");return this.projects.forEach(function(o){(r.test(o.prj_no)||r.test(o.prj_name)||r.test(o.customer)||r.test(o.quo_no))&&t.push(o)}),this.totalPages=Math.ceil(t.length/10),t.sort(this.sortFunction),startIndex=10*(this.currentPage-1),endIndex=startIndex+10,t=t.slice(startIndex,endIndex),t}},methods:{fetch:function(){var t=this;axios.get("/project/fetch").then(function(r){t.projects=r.data}).catch(function(t){})},show:function(t){window.location.href="/project/"+t.prj_no},store:function(){var t=this,r={prj_no:this.prj_no,prj_name:this.prj_name,quo_no:this.quo_no,customer:this.customer,prj_from:this.prj_from,prj_to:this.prj_to,description:this.description,status:"In Progress"};axios.post("/project/store",r).then(function(o){t.projects.unshift(r)}).catch(function(t){})},destroy:function(t){var r=this;bootbox.confirm({title:"Delete confirmation",message:"Do you really want to cancel this project ?",buttons:{cancel:{label:"No"},confirm:{label:"Yes"}},callback:function(o){o&&axios.delete("/project/destroy",{params:{prj_no:t}}).then(function(t){r.fetch()}).catch(function(t){})}})},sortBy:function(t){this.sortKey=t,this.sortOrders[t]*=-1},sortFunction:function(t,r){return null==t[this.sortKey]?1:null==r[this.sortKey]?-1:t[this.sortKey]<r[this.sortKey]?-1*this.sortOrders[this.sortKey]:t[this.sortKey]>r[this.sortKey]?1*this.sortOrders[this.sortKey]:0},changePage:function(t){this.currentPage=t,this.currentPage<1&&(this.currentPage=1),this.currentPage>this.totalPages&&(this.currentPage=this.totalPages)}}})},169:function(t,r,o){t.exports=o(134)}});