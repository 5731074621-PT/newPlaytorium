!function(t){function e(s){if(a[s])return a[s].exports;var o=a[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var a={};e.m=t,e.c=a,e.i=function(t){return t},e.d=function(t,a,s){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=168)}({133:function(t,e){var a=moment().format("YYYY-MM-DD");new Vue({el:"#new",data:{selectedProject:"",projects:[],task_name:"Dev",startDate:a,endDate:a,tasks:[{date:a,dayOfWeek:moment(a).format("ddd"),time_in:"09:00",time_out:"18:00",description:""}],holidays:[],leaveDays:[],errors:!1},mounted:function(){var t=this;pace.start(),axios.get("/project/fetchOwnProject").then(function(e){t.projects=e.data}).catch(function(t){}),this.fetchHoliday(),this.fetchLeaveDays(),$(".input-group.date").datepicker({maxViewMode:2,format:"yyyy-mm-dd",orientation:"bottom auto",autoclose:!0}).on("changeDate",function(){t.startDate=$("#startDateInput").val(),t.endDate=$("#endDateInput").val(),moment(t.endDate)<moment(t.startDate)&&(t.endDate=t.startDate,$("#endDateInput").val(t.startDate)),$("#toDatepicker").datepicker("setStartDate",t.startDate),t.tasks=[],t.appendTask(t.startDate,t.endDate)})},methods:{appendTask:function(t,e){t=moment(t),e=moment(e),this.fetchHoliday(),this.fetchLeaveDays();for(var a=t;a.diff(e,"days")<=0;a.add(1,"days")){for(var s={date:moment(a).format("YYYY-MM-DD"),dayOfWeek:moment(a).format("ddd"),time_in:"09:00",time_out:"18:00",description:"",isHoliday:!1,isLeaveDay:!1,isFullDayLeave:!1},o=0;o<this.holidays.length;o++)if(s.date==this.holidays[o].holiday){s.isHoliday=!0,s.description=this.holidays[o].date_name;break}for(var i=0;i<this.leaveDays.length;i++)if(s.date==this.leaveDays[i].leave_date){s.leaveDay=!0,s.description=this.leaveDays[i].leave_type+": You have left this day from "+this.leaveDays[i].leave_from.substr(11,5)+" to "+this.leaveDays[i].leave_to.substr(11,5),8==this.leaveDays[i].totalhours&&(s.isFullDayLeave=!0);break}"Sat"!=s.dayOfWeek&&"Sun"!=s.dayOfWeek||(s.isHoliday=!0),s.isFullDayLeave||this.tasks.push(s)}},removeTask:function(t,e){this.tasks.splice(e,1)},submit:function(){""==this.selectedProject&&(this.errors=!0,scroll(0,0));for(var t=[],e=0;e<this.tasks.length;e++)t.push(axios.post("/timesheet/store",{date:this.tasks[e].date,time_in:this.tasks[e].time_in,time_out:this.tasks[e].time_out,prj_no:this.selectedProject.substr(0,this.selectedProject.indexOf(" ")),task_name:this.task_name,description:this.tasks[e].description}));axios.all(t).then(axios.spread(function(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];for(var s=0;s<e.length;s++);window.location.href="/timesheet"})).catch(function(t){})},fetchHoliday:function(){var t=this;axios.get("/holiday/fetch",{params:{year:moment(this.startDate).format("YYYY"),month:moment(this.startDate).format("MM")}}).then(function(e){t.holidays=e.data}).catch(function(t){})},fetchLeaveDays:function(){var t=this;axios.get("/leave_request/get-leaves-in-month",{params:{year:moment(this.startDate).format("YYYY"),month:moment(this.startDate).format("MM")}}).then(function(e){t.leaveDays=e.data}).catch(function(t){})}}})},168:function(t,e,a){t.exports=a(133)}});